git 
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LangGraph Story Adventure</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            line-height: 1.6;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
        }
        .container {
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 20px;
            margin-bottom: 20px;
        }
        .story {
            background-color: #f9f9f9;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 15px;
            white-space: pre-wrap;
        }
        .question {
            font-weight: bold;
            margin-top: 15px;
        }
        .options {
            margin-top: 10px;
            margin-bottom: 20px;
        }
        .option {
            display: block;
            margin-bottom: 10px;
        }
        button {
            background-color: #4CAF50;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background-color: #45a049;
        }
        .hidden {
            display: none;
        }
        .score {
            font-weight: bold;
            font-size: 18px;
            margin-top: 20px;
        }
        .setup-form {
            margin-bottom: 30px;
        }
        .setup-form input[type="text"] {
            padding: 8px;
            margin-bottom: 10px;
            width: 100%;
            box-sizing: border-box;
        }
        .game-area {
            display: none;
        }
        .feedback {
            margin-top: 10px;
            padding: 10px;
            border-radius: 5px;
        }
        .correct {
            background-color: #dff0d8;
            color: #3c763d;
        }
        .incorrect {
            background-color: #f2dede;
            color: #a94442;
        }
    </style>
</head>
<body>
    <h1>LangGraph Story Adventure</h1>
    
    <div id="setup-area" class="container">
        <h2>Setup Your Adventure</h2>
        <form id="setup-form" class="setup-form">
            <div>
                <label for="user-name">Character Name:</label>
                <input type="text" id="user-name" name="user_name" value="un nago guerriero" required>
            </div>
            <div>
                <label for="user-context">Setting:</label>
                <input type="text" id="user-context" name="user_context" value="mordor del signore degli anelli" required>
            </div>
            <div>
                <label for="topic">Learning Topic:</label>
                <input type="text" id="topic" name="topic" value="teorema di pitagora" required>
            </div>
            <button type="submit">Start Adventure</button>
        </form>
    </div>

    <div id="game-area" class="container game-area">
        <div class="score">Score: <span id="score">0</span></div>
        <div id="story-container" class="story"></div>
        
        <div id="question-area">
            <div id="question" class="question"></div>
            <div id="options" class="options">
                <label class="option"><input type="radio" name="answer" value="a"> <span id="option-a"></span></label>
                <label class="option"><input type="radio" name="answer" value="b"> <span id="option-b"></span></label>
                <label class="option"><input type="radio" name="answer" value="c"> <span id="option-c"></span></label>
            </div>
            <div id="feedback" class="feedback hidden"></div>
            <button id="submit-answer">Submit Answer</button>
        </div>
        
        <div id="end-area" class="hidden">
            <h2>Adventure Complete!</h2>
            <div id="final-score" class="score"></div>
            <button id="restart">Start New Adventure</button>
        </div>
    </div>

    <script>
        let sessionId = null;
        let counter = 0;
        let score = 0;
        let correctAnswer = '';
        
        // Setup form submission
        document.getElementById('setup-form').addEventListener('submit', async function(e) {
            e.preventDefault();
            
            const userData = {
                user_name: document.getElementById('user-name').value,
                user_context: document.getElementById('user-context').value,
                topic: document.getElementById('topic').value
            };
            
            try {
                const response = await fetch('/api/start', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(userData)
                });
                
                const data = await response.json();
                
                if (data.success) {
                    sessionId = data.session_id;
                    counter = 0;
                    score = 0;
                    updateScore();
                    
                    // Display first chapter
                    document.getElementById('story-container').textContent = data.story;
                    document.getElementById('question').textContent = data.question;
                    document.getElementById('option-a').textContent = data.options.a;
                    document.getElementById('option-b').textContent = data.options.b;
                    document.getElementById('option-c').textContent = data.options.c;
                    correctAnswer = data.correct_answer;
                    
                    // Hide setup, show game
                    document.getElementById('setup-area').style.display = 'none';
                    document.getElementById('game-area').style.display = 'block';
                    
                    // Reset radio buttons
                    const radioButtons = document.getElementsByName('answer');
                    for (const radioButton of radioButtons) {
                        radioButton.checked = false;
                    }
                    
                    // Hide feedback
                    document.getElementById('feedback').classList.add('hidden');
                }
            } catch (error) {
                console.error('Error starting game:', error);
                alert('Failed to start game. Please try again.');
            }
        });
        
        // Submit answer
        document.getElementById('submit-answer').addEventListener('click', async function() {
            const selectedOption = document.querySelector('input[name="answer"]:checked');
            
            if (!selectedOption) {
                alert('Please select an answer');
                return;
            }
            
            const userAnswer = selectedOption.value;
            const feedback = document.getElementById('feedback');
            
            // Check if answer is correct
            const isCorrect = userAnswer === correctAnswer;
            
            // Update score
            if (isCorrect) {
                score++;
                updateScore();
                feedback.textContent = 'Correct!';
                feedback.classList.remove('incorrect');
                feedback.classList.add('correct');
            } else {
                feedback.textContent = `Incorrect. The correct answer was ${correctAnswer}.`;
                feedback.classList.remove('correct');
                feedback.classList.add('incorrect');
            }
            
            feedback.classList.remove('hidden');
            
            counter++;
            
            try {
                const response = await fetch('/api/answer', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        session_id: sessionId,
                        answer: userAnswer
                    })
                });
                
                const data = await response.json();
                
                if (data.success) {
                    // Check if game is over
                    if (counter >= 3) {
                        // End game
                        document.getElementById('question-area').classList.add('hidden');
                        document.getElementById('end-area').classList.remove('hidden');
                        document.getElementById('final-score').textContent = `Final Score: ${score}/3`;
                    } else {
                        // Continue game
                        document.getElementById('story-container').textContent += '

' + data.story;
                        document.getElementById('question').textContent = data.question;
                        document.getElementById('option-a').textContent = data.options.a;
                        document.getElementById('option-b').textContent = data.options.b;
                        document.getElementById('option-c').textContent = data.options.c;
                        correctAnswer = data.correct_answer;
                        
                        // Reset radio buttons
                        const radioButtons = document.getElementsByName('answer');
                        for (const radioButton of radioButtons) {
                            radioButton.checked = false;
                        }
                        
                        // Hide feedback after a delay
                        setTimeout(() => {
                            feedback.classList.add('hidden');
                        }, 3000);
                    }
                }
            } catch (error) {
                console.error('Error submitting answer:', error);
                alert('Failed to submit answer. Please try again.');
            }
        });
        
        // Restart game
        document.getElementById('restart').addEventListener('click', function() {
            document.getElementById('setup-area').style.display = 'block';
            document.getElementById('game-area').style.display = 'none';
            document.getElementById('question-area').classList.remove('hidden');
            document.getElementById('end-area').classList.add('hidden');
            document.getElementById('story-container').textContent = '';
        });
        
        function updateScore() {
            document.getElementById('score').textContent = score;
        }
    </script>
</body>
</html>
    